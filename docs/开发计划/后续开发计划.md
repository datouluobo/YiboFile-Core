# OoiMRR 后续开发计划

**上次更新**: 2025-12-29  
**当前版本**: v1.7.3  
**项目状态**: ✅ 代码重构完成，准备开发新功能

## 待开发功能

### 优先级高
- [ ] **修复设置保存问题** - 修复有些设置修改后不能保存，下次启动会恢复的问题
- [ ] **文本预览增强** - 文本类的预览工具栏增加自动换行按钮及功能
- [ ] **标签页宽度模式增强** 
- [ ] **图片预览的窗口适应/1:1显示/放大缩小的中心定位**
- [ ] **完善搜索功能** - 增强搜索体验和功能（详见下方"搜索与导航"章节）
- [x] **收藏按钮位置调整** - 窗口左下角的"添加收藏"按钮，移动到"收藏"文本后面
- [ ] **驱动器容量可视化** - 驱动器背景色体现驱动器容量（使用率越高颜色越深或渐变）
- [ ] **重做AI训练功能** - 重新设计和实现TagTrain的AI图片标签训练模块

### 其他功能
- [ ] 剪切板管理器
- [ ] 标签页右侧加新建标签页按钮
- [ ] 设置面板增加统一管理主题/样式/颜色的功能

### 预览功能增强
- [ ] CAD 文件预览（DWG/DXF）

### 操作功能
- [ ] 文件拖拽支持
- [ ] 批量操作

### 搜索与导航
- [ ] 文件搜索增强
- [ ] 历史记录
- [ ] 全文搜索（支持文件内容、备注、标签、时间及多条件组合）
    - [ ] 新建全文索引服务（分离至 Services/TextSearch/TextSearchService.cs）
    - [ ] 支持初次索引与增量更新
    - [ ] 文件内容与备注、标签聚合搜索能力
    - [ ] UI：支持在搜索框进行内容/备注/标签多条件输入
    - [ ] 支持多线程索引与性能优化
    - [ ] 支持时间搜索（可按创建时间/更新时间筛选、距今多长时间、特定日期区间选择）
    - [ ] 搜索结果可按时间维度排序和筛选
    - [ ] 索引失败/被占用提示和日志记录

### 文件列表
- [ ] 文件/文件夹创建时间支持不同颜色高亮（如近期创建按时间段动态标色）
    - [ ] 通过设置或规则自定义不同时间段的颜色
    - [ ] 适配深色/浅色主题
- [ ] 文件列表多视图模式切换（详情、缩略图、大图标、平铺、紧凑）
    - [ ] 支持用户自定义默认视图
    - [ ] 视图状态与列宽等个性化设置持久化
    - [ ] 视图模式下文件预览与操作适配优化
- [ ] 文件列表过滤功能（同时支持搜索时过滤）
    - [ ] 支持按文件类型、大小、创建/修改时间过滤
    - [ ] UI：文件列表顶部新增过滤条件选择栏
    - [ ] 支持与搜索关键字组合过滤（如“图片且1天内创建且文件名含‘合同’”）
    - [ ] 服务层新增 FileListFilterService（路径：Services/FileList/FileListFilterService.cs）
    - [ ] 过滤规则支持自定义保存、加载与重用
    - [ ] 过滤器与现有文件列表/搜索结果无缝集成（通过ViewModel统一管理）
    - [ ] 性能优化：支持异步过滤，保证大数据量高效响应

### 图片训练与标签tag
- [ ] TagTrain 图片训练增强
    - [ ] 支持选中图片列表批量训练标签
    - [ ] 支持标签合并与批量重命名
    - [ ] 提供标签与图片一对多/多对多管理
    - [ ] 支持标签树（多层嵌套分类显示）
    - [ ] 提供标签自动建议和快速录入
    - [ ] 增强标签统计与筛选（使用频率、最近使用、已训练/未训练统计）
    - [ ] UI 支持标签热力图展示、标签云视图
    - [ ] TagTrainService 服务层拆分（路径：Services/TagTrain/TagTrainService.cs）
    - [ ] 支持模型参数导入导出（便于迁移和备份）
    - [ ] 支持训练历史记录与回滚
- [ ] AI 自动训练图片
    - [ ] 支持自动采集图片特征并训练标签
    - [ ] 服务层新增 ImageAutoTrainerService（路径：Services/TagTrain/ImageAutoTrainerService.cs）
    - [ ] 支持本地与在线模型（选型需评估依赖安装体验）
    - [ ] UI 支持一键自动训练入口及进度反馈
    - [ ] 训练结果自动同步至标签系统与统计面板
    - [ ] 支持训练失败/异常友好提示与日志记录

### UI/UX
- [ ] 对调顶部按钮和标签tabs位置
- [ ] 主题切换（深色模式）
- [ ] 把所有颜色编码成变量，方便统一修改

## 架构优化

### 持续重构
- 继续拆分 MainWindow.xaml.cs，目标减少至 2000 行以下
- 完善服务层测试覆盖
- 优化性能瓶颈

### 代码质量
- 完善单元测试
- 代码审查机制
- 文档完善
